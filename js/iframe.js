/*! iFrame Resizer (iframeSizer.contentWindow.min.js) - v3.5.3 - 2016-02-23
 *  Desc: Include this file in any page being loaded into an iframe
 *        to force the iframe to resize to the content size.
 *  Requires: iframeResizer.min.js on host page.
 *  Copyright: (c) 2016 David J. Bradshaw - dave@bradshaw.net
 *  License: MIT
 */

!function(e){"use strict";function n(e,n,i){"addEventListener"in window?e.addEventListener(n,i,!1):"attachEvent"in window&&e.attachEvent("on"+n,i)}function i(e,n,i){"removeEventListener"in window?e.removeEventListener(n,i,!1):"detachEvent"in window&&e.detachEvent("on"+n,i)}function t(){var e,n=["moz","webkit","o","ms"];for(e=0;e<n.length&&!A;e+=1)A=window[n[e]+"RequestAnimationFrame"];A||r("setup","RequestAnimationFrame not supported")}function o(e){return q[e]?q[e].log:O}function r(e,n){u("log",e,n,o(e))}function a(e,n){u("info",e,n,o(e))}function c(e,n){u("warn",e,n,!0)}function u(e,n,i,t){!0===t&&"object"==typeof window.console}function s(e){function t(){function e(){h(Q),m(X),A("resizedCallback",Q)}u("Height"),u("Width"),b(e,Q,"init")}function o(){var e=J.substr(S).split(":");return{iframe:q[e[0]]&&q[e[0]].iframe,id:e[0],height:e[1],width:e[2],type:e[3]}}function u(e){var n=Number(q[X]["max"+e]),i=Number(q[X]["min"+e]),t=e.toLowerCase(),o=Number(Q[t]);r(X,"Checking "+t+" is in range "+i+"-"+n),i>o&&(o=i,r(X,"Set "+t+" to min value")),o>n&&(o=n,r(X,"Set "+t+" to max value")),Q[t]=""+o}function s(){function n(){function e(){var e=0,n=!1;for(r(X,"Checking connection is from allowed list of origins: "+t);e<t.length;e++)if(t[e]===i){n=!0;break}return n}function n(){var e=q[X]&&q[X].remoteHost;return r(X,"Checking connection is from: "+e),i===e}return t.constructor===Array?e():n()}var i=e.origin,t=q[X]&&q[X].checkOrigin;if(t&&""+i!="null"&&!n())throw new Error("Unexpected message received from: "+i+" for "+Q.iframe.id+". Message was: "+e.data+". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.");return!0}function v(){return H===(""+J).substr(0,S)&&J.substr(S).split(":")[0]in q}function M(){var e=Q.type in{"true":1,"false":1,undefined:1};return e&&r(X,"Ignoring init message from meta parent page"),e}function F(e){return J.substr(J.indexOf(":")+P+e)}function x(e){r(X,"MessageCallback passed: {iframe: "+Q.iframe.id+", message: "+e+"}"),A("messageCallback",{iframe:Q.iframe,message:JSON.parse(e)}),r(X,"--")}function z(){var e=document.body.getBoundingClientRect(),n=Q.iframe.getBoundingClientRect();return JSON.stringify({iframeHeight:n.height,iframeWidth:n.width,clientHeight:Math.max(document.documentElement.clientHeight,window.innerHeight||0),clientWidth:Math.max(document.documentElement.clientWidth,window.innerWidth||0),offsetTop:parseInt(n.top-e.top,10),offsetLeft:parseInt(n.left-e.left,10),scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset})}function I(e,n){function i(){p("Send Page Info","pageInfo:"+z(),e,n)}k(i,32)}function R(){function e(e,n){function i(){q[a]?I(q[a].iframe,a):t()}["scroll","resize"].forEach(function(t){r(a,e+t+" listener for sendPageInfo"),n(window,t,i)})}function t(){e("Remove ",i)}function o(){e("Add ",n)}var a=X;o(),q[a]&&(q[a].stopPageInfo=t)}function C(){q[X]&&q[X].stopPageInfo&&(q[X].stopPageInfo(),delete q[X].stopPageInfo)}function E(){var e=!0;return null===Q.iframe&&(c(X,"IFrame ("+Q.id+") not found"),e=!1),e}function T(e){var n=e.getBoundingClientRect();return l(X),{x:Math.floor(Number(n.left)+Number(j.x)),y:Math.floor(Number(n.top)+Number(j.y))}}function O(e){function n(){j=a,W(),r(X,"--")}function i(){return{x:Number(Q.width)+o.x,y:Number(Q.height)+o.y}}function t(){window.parentIFrame?window.parentIFrame["scrollTo"+(e?"Offset":"")](a.x,a.y):c(X,"Unable to scroll to requested position, window.parentIFrame not found")}var o=e?T(Q.iframe):{x:0,y:0},a=i();r(X,"Reposition requested from iFrame (offset x:"+o.x+" y:"+o.y+")"),window.top!==window.self?t():n()}function W(){!1!==A("scrollCallback",j)?m(X):g()}function N(e){function n(){var e=T(a);r(X,"Moving to in page link (#"+t+") at x: "+e.x+" y: "+e.y),j={x:e.x,y:e.y},W(),r(X,"--")}function i(){window.parentIFrame?window.parentIFrame.moveToAnchor(t):r(X,"In page link #"+t+" not found and window.parentIFrame not found")}var t=e.split("#")[1]||"",o=decodeURIComponent(t),a=document.getElementById(o)||document.getElementsByName(o)[0];a?n():window.top!==window.self?i():r(X,"In page link #"+t+" not found")}function A(e,n){return f(X,e,n)}function L(){switch(q[X]&&q[X].firstRun&&D(),Q.type){case"close":q[X].closeRequestCallback?f(X,"closeRequestCallback",q[X].iframe):d(Q.iframe);break;case"message":x(F(6));break;case"scrollTo":O(!1);break;case"scrollToOffset":O(!0);break;case"pageInfo":I(q[X]&&q[X].iframe,X),R();break;case"pageInfoStop":C();break;case"inPageLink":N(F(9));break;case"reset":w(Q);break;case"init":t(),A("initCallback",Q.iframe);break;default:t()}}function B(e){var n=!0;return q[e]||(n=!1,c(Q.type+" No settings for "+e+". Message was: "+J)),n}function U(){for(var e in q)p("iFrame requested init",y(e),document.getElementById(e),e)}function D(){q[X]&&(q[X].firstRun=!1)}var J=e.data,Q={},X=null;"[iFrameResizerChild]Ready"===J?U():v()?(Q=o(),X=V=Q.id,q[X]&&(q[X].loaded=!0),!M()&&B(X)&&(r(X,"Received: "+J),E()&&s()&&L())):a(X,"Ignored: "+J)}function f(e,n,i){var t=null,o=null;if(q[e]){if(t=q[e][n],"function"!=typeof t)throw new TypeError(n+" on iFrame["+e+"] is not a function");o=t(i)}return o}function d(e){var n=e.id;r(n,"Removing iFrame: "+n),e.parentNode&&e.parentNode.removeChild(e),f(n,"closedCallback",n),r(n,"--"),delete q[n]}function l(n){null===j&&(j={x:window.pageXOffset!==e?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==e?window.pageYOffset:document.documentElement.scrollTop},r(n,"Get page position: "+j.x+","+j.y))}function m(e){null!==j&&(window.scrollTo(j.x,j.y),r(e,"Set page position: "+j.x+","+j.y),g())}function g(){j=null}function w(e){function n(){h(e),p("reset","reset",e.iframe,e.id)}r(e.id,"Size reset requested by "+("init"===e.type?"host page":"iFrame")),l(e.id),b(n,e,"reset")}function h(e){function n(n){e.iframe.style[n]=e[n]+"px",r(e.id,"IFrame ("+o+") "+n+" set to "+e[n]+"px")}function i(n){W||"0"!==e[n]||(W=!0,r(o,"Hidden iFrame detected, creating visibility listener"),M())}function t(e){n(e),i(e)}var o=e.iframe.id;q[o]&&(q[o].sizeHeight&&t("height"),q[o].sizeWidth&&t("width"))}function b(e,n,i){i!==n.type&&A?(r(n.id,"Requesting animation frame"),A(e)):e()}function p(e,n,i,t,o){function a(){var o=q[t]&&q[t].targetOrigin;r(t,"["+e+"] Sending msg to iframe["+t+"] ("+n+") targetOrigin: "+o),i.contentWindow.postMessage(H+n,o)}function u(){c(t,"["+e+"] IFrame("+t+") not found")}function s(){i&&"contentWindow"in i&&null!==i.contentWindow?a():u()}function f(){function e(){!q[t]||q[t].loaded||d||(d=!0,c(t,"IFrame has not responded within "+q[t].warningTimeout/1e3+" seconds. Check iFrameResizer.contentWindow.js has been loaded in iFrame. This message can be ingored if everything is working, or you can set the warningTimeout option to a higher value or zero to suppress this warning."))}o&&q[t]&&q[t].warningTimeout&&(q[t].msgTimeout=setTimeout(e,q[t].warningTimeout))}var d=!1;t=t||i.id,q[t]&&(s(),f())}function y(e){return e+":"+q[e].bodyMarginV1+":"+q[e].sizeWidth+":"+q[e].log+":"+q[e].interval+":"+q[e].enablePublicMethods+":"+q[e].autoResize+":"+q[e].bodyMargin+":"+q[e].heightCalculationMethod+":"+q[e].bodyBackground+":"+q[e].bodyPadding+":"+q[e].tolerance+":"+q[e].inPageLinks+":"+q[e].resizeFrom+":"+q[e].widthCalculationMethod}function v(i,t){function o(){function e(e){1/0!==q[k][e]&&0!==q[k][e]&&(i.style[e]=q[k][e]+"px",r(k,"Set "+e+" = "+q[k][e]+"px"))}function n(e){if(q[k]["min"+e]>q[k]["max"+e])throw new Error("Value for min"+e+" can not be greater than max"+e)}n("Height"),n("Width"),e("maxHeight"),e("minHeight"),e("maxWidth"),e("minWidth")}function a(){var e=t&&t.id||U.id+T++;return null!==document.getElementById(e)&&(e+=T++),e}function c(e){return V=e,""===e&&(i.id=e=a(),O=(t||{}).log,V=e,r(e,"Added missing iframe ID: "+e+" ("+i.src+")")),e}function u(){switch(r(k,"IFrame scrolling "+(q[k]&&q[k].scrolling?"enabled":"disabled")+" for "+k),i.style.overflow=!1===(q[k]&&q[k].scrolling)?"hidden":"auto",q[k]&&q[k].scrolling){case!0:i.scrolling="yes";break;case!1:i.scrolling="no";break;default:i.scrolling=q[k]?q[k].scrolling:"no"}}function s(){("number"==typeof(q[k]&&q[k].bodyMargin)||"0"===(q[k]&&q[k].bodyMargin))&&(q[k].bodyMarginV1=q[k].bodyMargin,q[k].bodyMargin=""+q[k].bodyMargin+"px")}function f(){var e=q[k]&&q[k].firstRun,n=q[k]&&q[k].heightCalculationMethod in L;!e&&n&&w({iframe:i,height:0,width:0,type:"init"})}function l(){Function.prototype.bind&&q[k]&&(q[k].iframe.iFrameResizer={close:d.bind(null,q[k].iframe),resize:p.bind(null,"Window resize","resize",q[k].iframe),moveToAnchor:function(e){p("Move to anchor","moveToAnchor:"+e,q[k].iframe,k)},sendMessage:function(e){e=JSON.stringify(e),p("Send Message","message:"+e,q[k].iframe,k)}})}function m(t){function o(){p("iFrame.onload",t,i,e,!0),f()}n(i,"load",o),p("init",t,i,e,!0)}function g(e){if("object"!=typeof e)throw new TypeError("Options is not an object")}function h(e){for(var n in U)U.hasOwnProperty(n)&&(q[k][n]=e.hasOwnProperty(n)?e[n]:U[n])}function b(e){return""===e||"file://"===e?"*":e}function v(e){e=e||{},q[k]={firstRun:!0,iframe:i,remoteHost:i.src.split("/").slice(0,3).join("/")},g(e),h(e),q[k]&&(q[k].targetOrigin=!0===q[k].checkOrigin?b(q[k].remoteHost):"*")}var k=c(i.id);v(t),u(),o(),s(),m(y(k)),l()}function k(e,n){null===B&&(B=setTimeout(function(){B=null,e()},n))}function M(){function e(){function e(e){function n(n){return"0px"===(q[e]&&q[e].iframe.style[n])}function i(e){return null!==e.offsetParent}q[e]&&i(q[e].iframe)&&(n("height")||n("width"))&&p("Visibility change","resize",q[e].iframe,e)}for(var n in q)e(n)}function n(n){r("window","Mutation observed: "+n[0].target+" "+n[0].type),k(e,16)}function i(){var e=document.querySelector("body"),i={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0},o=new t(n);o.observe(e,i)}var t=window.MutationObserver||window.WebKitMutationObserver;t&&i()}function F(e){function n(){z("Window "+e,"resize")}r("window","Trigger event: "+e),k(n,16)}function x(){function e(){z("Tab Visable","resize")}"hidden"!==document.visibilityState&&(r("document","Trigger event: Visiblity change"),k(e,16))}function z(e,n){function i(e){return q[e]&&"parent"===q[e].resizeFrom&&q[e].autoResize&&!q[e].firstRun}for(var t in q)i(t)&&p(e,n,document.getElementById(t),t)}function I(){n(window,"message",s),n(window,"resize",function(){F("resize")}),n(document,"visibilitychange",x),n(document,"-webkit-visibilitychange",x),n(window,"focusin",function(){F("focus")}),n(window,"focus",function(){F("focus")})}function R(e){try{return e instanceof HTMLElement}catch(n){return"object"==typeof e&&1===e.nodeType&&"object"==typeof e.style&&"object"==typeof e.ownerDocument}}function C(){function n(e,n){function i(){if(!n.tagName)throw new TypeError("Object is not a valid DOM element");if("IFRAME"!==n.tagName.toUpperCase())throw new TypeError("Expected <IFRAME> tag, found <"+n.tagName+">")}R(e)&&(n=e,e={}),n&&(i(),v(n,e),o.push(n))}function i(e){e&&e.enablePublicMethods&&c("enablePublicMethods option has been removed, public methods are now always available in the iFrame")}var o;return t(),I(),function(t,r){switch(o=[],i(t),typeof r){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(r||"iframe"),n.bind(e,t));break;case"object":n(t,r);break;default:throw new TypeError("Unexpected data type ("+typeof r+")")}return o}}function E(e){e.fn?e.fn.iFrameResize||(e.fn.iFrameResize=function(e){function n(n,i){v(i,e)}return this.filter("iframe").each(n).end()}):a("","Unable to bind to jQuery, it is not fully loaded.")}if("undefined"!=typeof window){var T=0,O=!1,W=!1,N="message",P=N.length,H="[iFrameSizer]",S=H.length,j=null,A=window.requestAnimationFrame,L={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},q={},B=null,V="Host Page",U={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!1,inPageLinks:!1,enablePublicMethods:!0,heightCalculationMethod:"bodyOffset",id:"iFrameResizer",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,resizeFrom:"parent",scrolling:!1,sizeHeight:!0,sizeWidth:!1,warningTimeout:5e3,tolerance:0,widthCalculationMethod:"scroll",closedCallback:function(){},initCallback:function(){},messageCallback:function(){c("MessageCallback function not defined")},resizedCallback:function(){},scrollCallback:function(){return!0}};window.jQuery&&E(window.jQuery),window.iFrameResize=window.iFrameResize||C()}}();
!function(a){"use strict";function b(b,c,d){"addEventListener"in a?b.addEventListener(c,d,!1):"attachEvent"in a&&b.attachEvent("on"+c,d)}function c(b,c,d){"removeEventListener"in a?b.removeEventListener(c,d,!1):"detachEvent"in a&&b.detachEvent("on"+c,d)}function d(a){return a.charAt(0).toUpperCase()+a.slice(1)}function e(a){var b,c,d,e=null,f=0,g=function(){f=Fa(),e=null,d=a.apply(b,c),e||(b=c=null)};return function(){var h=Fa();f||(f=h);var i=xa-(h-f);return b=this,c=arguments,0>=i||i>xa?(e&&(clearTimeout(e),e=null),f=h,d=a.apply(b,c),e||(b=c=null)):e||(e=setTimeout(g,i)),d}}function f(a){return ma+"["+oa+"] "+a}function g(b){la&&"object"==typeof a.console&&console.log(f(b))}function h(b){"object"==typeof a.console&&console.warn(f(b))}function i(){j(),g("Initialising iFrame ("+location.href+")"),k(),n(),m("background",W),m("padding",$),A(),s(),t(),o(),C(),u(),ia=B(),N("init","Init message from host page"),Da()}function j(){function a(a){return"true"===a?!0:!1}var b=ha.substr(na).split(":");oa=b[0],X=void 0!==b[1]?Number(b[1]):X,_=void 0!==b[2]?a(b[2]):_,la=void 0!==b[3]?a(b[3]):la,ja=void 0!==b[4]?Number(b[4]):ja,U=void 0!==b[6]?a(b[6]):U,Y=b[7],fa=void 0!==b[8]?b[8]:fa,W=b[9],$=b[10],ua=void 0!==b[11]?Number(b[11]):ua,ia.enable=void 0!==b[12]?a(b[12]):!1,qa=void 0!==b[13]?b[13]:qa,Aa=void 0!==b[14]?b[14]:Aa}function k(){function b(){var b=a.iFrameResizer;g("Reading data from page: "+JSON.stringify(b)),Ca="messageCallback"in b?b.messageCallback:Ca,Da="readyCallback"in b?b.readyCallback:Da,ta="targetOrigin"in b?b.targetOrigin:ta,fa="heightCalculationMethod"in b?b.heightCalculationMethod:fa,Aa="widthCalculationMethod"in b?b.widthCalculationMethod:Aa}"iFrameResizer"in a&&Object===a.iFrameResizer.constructor&&b(),g("TargetOrigin for parent set to: "+ta)}function l(a,b){return-1!==b.indexOf("-")&&(h("Negative CSS value ignored for "+a),b=""),b}function m(a,b){void 0!==b&&""!==b&&"null"!==b&&(document.body.style[a]=b,g("Body "+a+' set to "'+b+'"'))}function n(){void 0===Y&&(Y=X+"px"),m("margin",l("margin",Y))}function o(){document.documentElement.style.height="",document.body.style.height="",g('HTML & body height set to "auto"')}function p(e){function f(){N(e.eventName,e.eventType)}var h={add:function(c){b(a,c,f)},remove:function(b){c(a,b,f)}};e.eventNames&&Array.prototype.map?(e.eventName=e.eventNames[0],e.eventNames.map(h[e.method])):h[e.method](e.eventName),g(d(e.method)+" event listener: "+e.eventType)}function q(a){p({method:a,eventType:"Animation Start",eventNames:["animationstart","webkitAnimationStart"]}),p({method:a,eventType:"Animation Iteration",eventNames:["animationiteration","webkitAnimationIteration"]}),p({method:a,eventType:"Animation End",eventNames:["animationend","webkitAnimationEnd"]}),p({method:a,eventType:"Input",eventName:"input"}),p({method:a,eventType:"Mouse Up",eventName:"mouseup"}),p({method:a,eventType:"Mouse Down",eventName:"mousedown"}),p({method:a,eventType:"Orientation Change",eventName:"orientationchange"}),p({method:a,eventType:"Print",eventName:["afterprint","beforeprint"]}),p({method:a,eventType:"Ready State Change",eventName:"readystatechange"}),p({method:a,eventType:"Touch Start",eventName:"touchstart"}),p({method:a,eventType:"Touch End",eventName:"touchend"}),p({method:a,eventType:"Touch Cancel",eventName:"touchcancel"}),p({method:a,eventType:"Transition Start",eventNames:["transitionstart","webkitTransitionStart","MSTransitionStart","oTransitionStart","otransitionstart"]}),p({method:a,eventType:"Transition Iteration",eventNames:["transitioniteration","webkitTransitionIteration","MSTransitionIteration","oTransitionIteration","otransitioniteration"]}),p({method:a,eventType:"Transition End",eventNames:["transitionend","webkitTransitionEnd","MSTransitionEnd","oTransitionEnd","otransitionend"]}),"child"===qa&&p({method:a,eventType:"IFrame Resized",eventName:"resize"})}function r(a,b,c,d){return b!==a&&(a in c||(h(a+" is not a valid option for "+d+"CalculationMethod."),a=b),g(d+' calculation method set to "'+a+'"')),a}function s(){fa=r(fa,ea,Ga,"height")}function t(){Aa=r(Aa,za,Ha,"width")}function u(){!0===U?(q("add"),F()):g("Auto Resize disabled")}function v(){g("Disable outgoing messages"),ra=!1}function w(){g("Remove event listener: Message"),c(a,"message",S)}function x(){null!==Z&&Z.disconnect()}function y(){q("remove"),x(),clearInterval(ka)}function z(){v(),w(),!0===U&&y()}function A(){var a=document.createElement("div");a.style.clear="both",a.style.display="block",document.body.appendChild(a)}function B(){function c(){return{x:void 0!==a.pageXOffset?a.pageXOffset:document.documentElement.scrollLeft,y:void 0!==a.pageYOffset?a.pageYOffset:document.documentElement.scrollTop}}function d(a){var b=a.getBoundingClientRect(),d=c();return{x:parseInt(b.left,10)+parseInt(d.x,10),y:parseInt(b.top,10)+parseInt(d.y,10)}}function e(a){function b(a){var b=d(a);g("Moving to in page link (#"+c+") at x: "+b.x+" y: "+b.y),R(b.y,b.x,"scrollToOffset")}var c=a.split("#")[1]||a,e=decodeURIComponent(c),f=document.getElementById(e)||document.getElementsByName(e)[0];void 0!==f?b(f):(g("In page link (#"+c+") not found in iFrame, so sending to parent"),R(0,0,"inPageLink","#"+c))}function f(){""!==location.hash&&"#"!==location.hash&&e(location.href)}function i(){function a(a){function c(a){a.preventDefault(),e(this.getAttribute("href"))}"#"!==a.getAttribute("href")&&b(a,"click",c)}Array.prototype.forEach.call(document.querySelectorAll('a[href^="#"]'),a)}function j(){b(a,"hashchange",f)}function k(){setTimeout(f,ba)}function l(){Array.prototype.forEach&&document.querySelectorAll?(g("Setting up location.hash handlers"),i(),j(),k()):h("In page linking not fully supported in this browser! (See README.md for IE8 workaround)")}return ia.enable?l():g("In page linking not enabled"),{findTarget:e}}function C(){g("Enable public methods"),Ba.parentIFrame={autoResize:function(a){return!0===a&&!1===U?(U=!0,u()):!1===a&&!0===U&&(U=!1,y()),U},close:function(){R(0,0,"close"),z()},getId:function(){return oa},getPageInfo:function(a){"function"==typeof a?(Ea=a,R(0,0,"pageInfo")):(Ea=function(){},R(0,0,"pageInfoStop"))},moveToAnchor:function(a){ia.findTarget(a)},reset:function(){Q("parentIFrame.reset")},scrollTo:function(a,b){R(b,a,"scrollTo")},scrollToOffset:function(a,b){R(b,a,"scrollToOffset")},sendMessage:function(a,b){R(0,0,"message",JSON.stringify(a),b)},setHeightCalculationMethod:function(a){fa=a,s()},setWidthCalculationMethod:function(a){Aa=a,t()},setTargetOrigin:function(a){g("Set targetOrigin: "+a),ta=a},size:function(a,b){var c=""+(a?a:"")+(b?","+b:"");N("size","parentIFrame.size("+c+")",a,b)}}}function D(){0!==ja&&(g("setInterval: "+ja+"ms"),ka=setInterval(function(){N("interval","setInterval: "+ja)},Math.abs(ja)))}function E(){function b(a){function b(a){!1===a.complete&&(g("Attach listeners to "+a.src),a.addEventListener("load",f,!1),a.addEventListener("error",h,!1),k.push(a))}"attributes"===a.type&&"src"===a.attributeName?b(a.target):"childList"===a.type&&Array.prototype.forEach.call(a.target.querySelectorAll("img"),b)}function c(a){k.splice(k.indexOf(a),1)}function d(a){g("Remove listeners from "+a.src),a.removeEventListener("load",f,!1),a.removeEventListener("error",h,!1),c(a)}function e(a,b,c){d(a.target),N(b,c+": "+a.target.src,void 0,void 0)}function f(a){e(a,"imageLoad","Image loaded")}function h(a){e(a,"imageLoadFailed","Image load failed")}function i(a){N("mutationObserver","mutationObserver: "+a[0].target+" "+a[0].type),a.forEach(b)}function j(){var a=document.querySelector("body"),b={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0};return m=new l(i),g("Create body MutationObserver"),m.observe(a,b),m}var k=[],l=a.MutationObserver||a.WebKitMutationObserver,m=j();return{disconnect:function(){"disconnect"in m&&(g("Disconnect body MutationObserver"),m.disconnect(),k.forEach(d))}}}function F(){var b=0>ja;a.MutationObserver||a.WebKitMutationObserver?b?D():Z=E():(g("MutationObserver not supported in this browser!"),D())}function G(a,b){function c(a){var c=/^\d+(px)?$/i;if(c.test(a))return parseInt(a,V);var d=b.style.left,e=b.runtimeStyle.left;return b.runtimeStyle.left=b.currentStyle.left,b.style.left=a||0,a=b.style.pixelLeft,b.style.left=d,b.runtimeStyle.left=e,a}var d=0;return b=b||document.body,"defaultView"in document&&"getComputedStyle"in document.defaultView?(d=document.defaultView.getComputedStyle(b,null),d=null!==d?d[a]:0):d=c(b.currentStyle[a]),parseInt(d,V)}function H(a){a>xa/2&&(xa=2*a,g("Event throttle increased to "+xa+"ms"))}function I(a,b){for(var c=b.length,e=0,f=0,h=d(a),i=Fa(),j=0;c>j;j++)e=b[j].getBoundingClientRect()[a]+G("margin"+h,b[j]),e>f&&(f=e);return i=Fa()-i,g("Parsed "+c+" HTML elements"),g("Element position calculated in "+i+"ms"),H(i),f}function J(a){return[a.bodyOffset(),a.bodyScroll(),a.documentElementOffset(),a.documentElementScroll()]}function K(a,b){function c(){return h("No tagged elements ("+b+") found on page"),da}var d=document.querySelectorAll("["+b+"]");return 0===d.length?c():I(a,d)}function L(){return document.querySelectorAll("body *")}function M(a,b,c,d){function e(){da=l,ya=m,R(da,ya,a)}function f(){function a(a,b){var c=Math.abs(a-b)<=ua;return!c}return l=void 0!==c?c:Ga[fa](),m=void 0!==d?d:Ha[Aa](),a(da,l)||_&&a(ya,m)}function h(){return!(a in{init:1,interval:1,size:1})}function i(){return fa in pa||_&&Aa in pa}function j(){g("No change in size detected")}function k(){h()&&i()?Q(b):a in{interval:1}||j()}var l,m;f()||"init"===a?(O(),e()):k()}function N(a,b,c,d){function e(){a in{reset:1,resetPage:1,init:1}||g("Trigger event: "+b)}function f(){return va&&a in aa}f()?g("Trigger event cancelled: "+a):(e(),Ia(a,b,c,d))}function O(){va||(va=!0,g("Trigger event lock on")),clearTimeout(wa),wa=setTimeout(function(){va=!1,g("Trigger event lock off"),g("--")},ba)}function P(a){da=Ga[fa](),ya=Ha[Aa](),R(da,ya,a)}function Q(a){var b=fa;fa=ea,g("Reset trigger event: "+a),O(),P("reset"),fa=b}function R(a,b,c,d,e){function f(){void 0===e?e=ta:g("Message targetOrigin: "+e)}function h(){var f=a+":"+b,h=oa+":"+f+":"+c+(void 0!==d?":"+d:"");g("Sending message to host page ("+h+")"),sa.postMessage(ma+h,e)}!0===ra&&(f(),h())}function S(b){function c(){return ma===(""+b.data).substr(0,na)}function d(){ha=b.data,sa=b.source,i(),ca=!1,setTimeout(function(){ga=!1},ba)}function e(){ga?g("Page reset ignored by init"):(g("Page size reset by host page"),P("resetPage"))}function f(){N("resizeParent","Parent window requested size check")}function j(){var a=l();ia.findTarget(a)}function k(){return b.data.split("]")[1].split(":")[0]}function l(){return b.data.substr(b.data.indexOf(":")+1)}function m(){return"iFrameResize"in a}function n(){var a=l();g("MessageCallback called from parent: "+a),Ca(JSON.parse(a)),g(" --")}function o(){var a=l();g("PageInfoFromParent called from parent: "+a),Ea(JSON.parse(a)),g(" --")}function p(){return b.data.split(":")[2]in{"true":1,"false":1}}function q(){switch(k()){case"reset":e();break;case"resize":f();break;case"moveToAnchor":j();break;case"message":n();break;case"pageInfo":o();break;default:m()||p()||h("Unexpected message ("+b.data+")")}}function r(){!1===ca?q():p()?d():g('Ignored message of type "'+k()+'". Received before initialization.')}c()&&r()}function T(){"loading"!==document.readyState&&a.parent.postMessage("[iFrameResizerChild]Ready","*")}var U=!0,V=10,W="",X=0,Y="",Z=null,$="",_=!1,aa={resize:1,click:1},ba=128,ca=!0,da=1,ea="bodyOffset",fa=ea,ga=!0,ha="",ia={},ja=32,ka=null,la=!1,ma="[iFrameSizer]",na=ma.length,oa="",pa={max:1,min:1,bodyScroll:1,documentElementScroll:1},qa="child",ra=!0,sa=a.parent,ta="*",ua=0,va=!1,wa=null,xa=16,ya=1,za="scroll",Aa=za,Ba=a,Ca=function(){h("MessageCallback function not defined")},Da=function(){},Ea=function(){},Fa=Date.now||function(){return(new Date).getTime()},Ga={bodyOffset:function(){return document.body.offsetHeight+G("marginTop")+G("marginBottom")},offset:function(){return Ga.bodyOffset()},bodyScroll:function(){return document.body.scrollHeight},documentElementOffset:function(){return document.documentElement.offsetHeight},documentElementScroll:function(){return document.documentElement.scrollHeight},max:function(){return Math.max.apply(null,J(Ga))},min:function(){return Math.min.apply(null,J(Ga))},grow:function(){return Ga.max()},lowestElement:function(){return Math.max(Ga.bodyOffset(),I("bottom",L()))},taggedElement:function(){return K("bottom","data-iframe-height")}},Ha={bodyScroll:function(){return document.body.scrollWidth},bodyOffset:function(){return document.body.offsetWidth},documentElementScroll:function(){return document.documentElement.scrollWidth},documentElementOffset:function(){return document.documentElement.offsetWidth},scroll:function(){return Math.max(Ha.bodyScroll(),Ha.documentElementScroll())},max:function(){return Math.max.apply(null,J(Ha))},min:function(){return Math.min.apply(null,J(Ha))},rightMostElement:function(){return I("right",L())},taggedElement:function(){return K("right","data-iframe-width")}},Ia=e(M);b(a,"message",S),T()}(window||{});
//# sourceMappingURL=iframeResizer.contentWindow.map